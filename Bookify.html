<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Bookify ‚Ä¢ Your Online Bookstore</title>

<!-- Icons for the services row -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
  :root{
    --bg:#121212; --card:#1e1e1e; --text:#e5e5e5; --muted:#b5b5b5; --brand:#60a5fa; --ok:#22c55e;
  }
  *{box-sizing:border-box}
  html,body{margin:0; font-family:system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:var(--bg); color:var(--text);}

  /* Header */
  header{position:sticky; top:0; z-index:50; background:#181818; border-bottom:1px solid #262626;}
  .nav{max-width:1200px; margin:0 auto; padding:14px 16px; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;}
  .brand{font-weight:900; color:var(--brand); display:flex; align-items:center; gap:10px;}
  nav a{color:var(--text); text-decoration:none; padding:8px 12px; border-radius:999px;}
  nav a:hover{background:#222;}

  main{max-width:1200px; margin:18px auto; padding:0 16px;}

  /* ---------- HERO SECTION ---------- */
    .hero {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      overflow: hidden;
    }

  .hero-slide {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      animation: fadeSlideshow 18s infinite;
      z-index: 0;
    }
.hero-slide:nth-child(1) {
  background-image: url("https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=1600&q=80");
  animation-delay: 0s;
}

.hero-slide:nth-child(2) {
  background-image: url("https://images.pexels.com/photos/590493/pexels-photo-590493.jpeg");
  animation-delay: 6s;
}

.hero-slide:nth-child(3) {
  background-image: url("https://images.unsplash.com/photo-1507842217343-583bb7270b66?auto=format&fit=crop&w=1200&q=80");
  animation-delay: 12s;
}

  @keyframes fadeSlideshow {
      0%   { opacity: 0; }
      8%   { opacity: 1; }
      33%  { opacity: 1; }
      41%  { opacity: 0; }
      100% { opacity: 0; }
    }

    .hero::after {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.55);
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
      padding: 20px;
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: bold;
    }
    .hero p {
      font-size: 1.2rem;
      margin-top: 10px;
    }
    .hero .btn {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 24px;
      background: #ff5722;
      color: #fff;
      border-radius: 8px;
      font-size: 1rem;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    .hero .btn:hover {
      background: #e64a19;
    }

    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1s forwards;
    }
    .fade-in.delay { animation-delay: 0.5s; }
    .fade-in.delay2 { animation-delay: 1s; }

    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }

  /* About */
  #about{display:flex; gap:22px; align-items:center; flex-wrap:wrap; background:#151515; border:1px solid #262626; border-radius:14px; padding:18px;}
  #about img{width:min(280px,100%); border-radius:12px;}
  #about .text{flex:1; min-width:260px;}
  #about h2{margin:0 0 8px;}

  /* Controls + Grid */
  .controls{display:flex; gap:10px; flex-wrap:wrap; margin:18px 0;}
  .controls input,.controls select{flex:1; min-width:200px; padding:10px 12px; border-radius:8px; border:1px solid #2b2b2b; background:#1b1b1b; color:var(--text)}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(210px,1fr)); gap:14px;}
  .card{background:var(--card); border:1px solid #262626; border-radius:14px; overflow:hidden; display:flex; flex-direction:column; transition:.2s transform,.2s box-shadow;}
  .card:hover{transform:translateY(-3px); box-shadow:0 10px 24px rgba(0,0,0,.35);}
  .cover{width:100%; aspect-ratio:3/4; object-fit:cover;}
  .content{padding:12px; display:flex; flex-direction:column; gap:6px;}
  .title{font-weight:800; line-height:1.25;}
  .muted{color:var(--muted); font-size:.92rem;}
  .chip{background:#0e3a5b; color:#93c5fd; padding:2px 8px; border-radius:999px; font-size:.78rem; width:fit-content;}
  .price{font-weight:800; color:var(--ok);}
  .actions{display:flex; gap:8px; margin-top:6px; flex-wrap:wrap;}
  .btn{padding:8px 10px; border-radius:8px; border:1px solid #2b2b2b; background:#222; color:var(--text); cursor:pointer; font-weight:700;}
  .btn.brand{background:var(--brand); color:#071427; border-color:var(--brand);}
  .badge{position:absolute; top:10px; left:10px; background:#14532d; color:#a7f3d0; font-size:.75rem; padding:4px 8px; border-radius:999px; border:1px solid #064e3b;}

  /* Borrowed tiny thumbs */
  #borrowed .card{flex-direction:row; align-items:center;}
  #borrowed .cover{width:80px; height:100px; border-right:1px solid #262626;}
  #borrowed .content{gap:4px;}

  /* Services row */
  .services{display:grid; grid-template-columns:repeat(4,1fr); gap:12px; background:#161616; border:1px solid #262626; border-radius:12px; padding:18px; margin:26px 0;}
  .service{display:flex; gap:12px; align-items:center; background:#121212; border:1px solid #262626; border-radius:12px; padding:12px;}
  .service i{font-size:26px; color:#16a34a;}
  .service .s-title{font-weight:800;}
  .service .s-sub{font-size:.9rem; color:var(--muted);}
  @media(max-width:860px){ .services{grid-template-columns:repeat(2,1fr);} }
  @media(max-width:520px){ .services{grid-template-columns:1fr;} }

  /* Reviews carousel */
  #reviews{margin:28px 0;}
  #reviews h2{margin:0 0 12px;}
  .carousel{position:relative; overflow:hidden; border:1px solid #262626; border-radius:12px; background:#151515; padding:16px;}
  .track{display:flex; gap:14px; transition:transform .4s ease;}
  .review{min-width:clamp(240px, 33.33%, 360px); background:#1a1a1a; border:1px solid #262626; border-radius:12px; padding:14px; text-align:center; display:flex; flex-direction:column; align-items:center;}
  .review img{width:70px; height:70px; border-radius:50%; object-fit:cover; margin-bottom:8px;}
  .review .name{font-weight:800; margin-bottom:4px;}
  .review .text{color:var(--muted); font-size:.95rem;}
  .car-btn{position:absolute; top:50%; transform:translateY(-50%); background:#0e0e0e; border:1px solid #2b2b2b; color:#fff; padding:8px 10px; border-radius:999px; cursor:pointer;}
  .car-btn:hover{background:#202020;}
  .prev{left:10px;} .next{right:10px;}

  /* Contact split */
  #contact{display:grid; grid-template-columns:1.2fr .8fr; gap:16px; margin-top:28px;}
  .contact-card{background:#151515; border:1px solid #262626; border-radius:12px; padding:16px;}
  form{display:flex; flex-direction:column; gap:10px;}
  input,textarea,select{padding:10px 12px; border:1px solid #2b2b2b; background:#1b1b1b; color:var(--text); border-radius:8px;}
  button[type="submit"]{background:var(--brand); color:#071427; border:1px solid var(--brand); padding:10px 12px; border-radius:8px; font-weight:800; cursor:pointer;}
  .details div{margin:8px 0; color:var(--muted);}
  @media(max-width:860px){ #contact{grid-template-columns:1fr;} }
  
  /* Social Icons */
    .social-links {
      text-align: center;
      margin-top: 30px;
    }

    .social-links a {
      display: inline-block;
      width: 40px;
      height: 40px;
      margin: 0 8px;
      background: #a80e6a;
      color: #fff;
      text-align: center;
      line-height: 40px;
      border-radius: 50%;
      font-size: 18px;
      transition: 0.3s;
    }

    .social-links a:hover {
      background: #a71454;
    }

    .footer-bottom {
  text-align: center;
  margin-top: 20px;
  padding: 15px 10px;
  font-size: 14px;
  color: #afd9f2;
  background: #121212; 
  border-top: 1px solid #070707;
}

.footer-bottom a {
  color: #da700c;       
  text-decoration: none;
  font-weight: bold;
  transition: color 0.3s;
}

.footer-bottom a:hover {
  color: #e7761a;     
}

  /* Modal (Buy) */
  .modal{position:fixed; inset:0; background:rgba(0,0,0,.65); display:none; align-items:center; justify-content:center; z-index:100;}
  .modal .panel{background:#151515; border:1px solid #262626; border-radius:14px; width:min(560px,94vw); padding:16px;}
  .panel h3{margin:0 0 8px;}
  .panel .row{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
  .close-x{float:right; cursor:pointer; font-weight:900; padding:4px 8px; border-radius:8px; border:1px solid #2b2b2b;}
  .offer-line{background:#0b2e1a; border:1px solid #064e3b; color:#a7f3d0; padding:8px 10px; border-radius:8px; margin:8px 0; font-size:.95rem;}
  .summary{background:#111; border:1px dashed #2b2b2b; padding:10px; border-radius:8px; margin-top:10px;}

/* NAVBAR */
nav {
  display: flex;
  gap: 20px;
  align-items: center;
}

nav a {
  text-decoration: none;
  color: #f6f7f8;
  font-weight: 500;
  font-size: 16px;
  transition: color 0.3s;
}

nav a:hover {
  color: #2563eb;
}

/* USER ICON */
.user-icon i {
  font-size: 18px;
  cursor: pointer;
}

/* ---------- LOGIN POPUP ---------- */
    .login-popup {
  display: none; /* hidden by default */
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  z-index: 200;
  align-items: center;
  justify-content: center;
}
    .login-box {
      background: white;
      padding: 25px;
      border-radius: 10px;
      width: 320px;
      position: relative;
      animation: fadeIn 0.4s ease;
    }
    .login-box h2 {
      margin-top: 0;
      text-align: center;
      color: #333;
    }
    .login-box label {
      display: block;
      margin: 10px 0 5px;
      font-size: 0.9rem;
      color: #555;
    }
    .login-box input[type="text"],
    .login-box input[type="password"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .login-box button {
      margin-top: 15px;
      width: 100%;
      padding: 12px;
      background: #ff5722;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .login-box button:hover {
      background: #e64a19;
    }
    .login-box .links {
      text-align: center;
      margin-top: 10px;
    }
    .login-box .links a {
      font-size: 0.85rem;
      color: #ff5722;
      text-decoration: none;
    }
    .login-box .links a:hover {
      text-decoration: underline;
    }
    .close-btn {
      position: absolute;
      top: 10px; right: 12px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }
    .close-btn:hover { color: black; }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

/* Tabs */
.tabs {
  display: flex;
  gap: 6px;
  margin-bottom: 14px;
}
.tab-btn {
  flex: 1;
  padding: 8px;
  border: none;
  background: #2a2a2a;
  color: #bbb;
  cursor: pointer;
  border-radius: 6px;
}
.tab-btn.active {
  background: var(--brand);
  color: #071427;
}
</style>
</head>
<body>

<header>
  <div class="nav">
    <div class="brand">üìö Bookify</div>
    <nav>
      <a href="#home">Home</a>
      <a href="#about">About</a>
      <a href="#store">Store</a>
      <a href="#borrowed">Borrowed</a>
      <a href="#reviews">Reviews</a>
      <a href="#contact">Contact</a>

      <!-- User / Sign In Icon -->
      <a href="javascript:void(0)" class="user-icon" id="userIcon">
        <i class="fas fa-user"></i>
      </a>
    </nav>
  </div>
</header>

<!-- LOGIN POPUP -->
  <div class="login-popup" id="loginPopup">
    <div class="login-box">
      <span class="close-btn" id="closePopup">&times;</span>
      <h2>Sign In</h2>
      <form>
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter your email">

        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password">

        <div class="remember">
          <input type="checkbox" id="remember">
          <label for="remember">Remember Me</label>
        </div>

        <button type="submit">Sign In</button>

        <p class="links">
          <a href="#">Forgot Password?</a> | 
          <a href="#">Create Account</a>
        </p>
      </form>
    </div>
  </div>
    
<!-- HERO -->
  <section class="hero" id="home">
    <div class="hero-slide"></div>
    <div class="hero-slide"></div>
    <div class="hero-slide"></div>

    <div class="hero-content">
      <h1 class="fade-in">Escape into Stories. Expand your World.</h1>
      <p class="fade-in delay">Discover, borrow, and buy your next favorite book ‚Äî anytime, anywhere.</p>
      <a href="#store" class="btn fade-in delay2">Start Reading</a>
    </div>
  </section>

  <!-- About -->
  <section id="about">
    <img src="https://images.pexels.com/photos/256541/pexels-photo-256541.jpeg?auto=compress&cs=tinysrgb&w=1600&q=80&utm_source=chatgpt.com"/>
    <div class="text">
      <h2>About Bookify</h2>
      <p>   
          Welcome to <strong>Bookify</strong>, your digital reading corner. We bring together
          thousands of self-help, fiction, non-fiction, and spiritual books under one roof.  
          Whether you want to borrow instantly or securely purchase in INR, Bookify makes it simple.  
          With curated collections, smooth navigation, and inspiring covers, Bookify is built to 
          make reading enjoyable, effortless, and personal.</p>
    </div>
  </section>

  <!-- Store -->
  <section id="store">
    <h2>Store</h2>
    <div class="controls">
      <input id="search" placeholder="Search title or author‚Ä¶">
      <select id="filter">
        <option value="all">All Categories</option>
        <option>Self-Help</option>
        <option>Spiritual</option>
        <option>Fiction</option>
        <option>Biography</option>
      </select>
    </div>
    <div id="bookGrid" class="grid"></div>
  </section>

  <!-- Borrowed -->
  <section id="borrowed">
    <h2>My Borrowed Books</h2>
    <div id="borrowedGrid" class="grid"></div>
  </section>

  <!-- Services -->
  <section class="services">
    <div class="service"><i class="fa-solid fa-truck"></i><div><div class="s-title">Free Shipping</div><div class="s-sub">Orders over ‚Çπ500</div></div></div>
    <div class="service"><i class="fa-solid fa-lock"></i><div><div class="s-title">Secure Payment</div><div class="s-sub">100% Safe Checkout</div></div></div>
    <div class="service"><i class="fa-solid fa-rotate-left"></i><div><div class="s-title">Easy Returns</div><div class="s-sub">10 Days Returns</div></div></div>
    <div class="service"><i class="fa-solid fa-headset"></i><div><div class="s-title">24/7 Support</div><div class="s-sub">Call Us Anytime</div></div></div>
  </section>

  <!-- Reviews Carousel -->
  <section id="reviews">
    <h2>What Readers Say</h2>
    <div class="carousel">
      <button class="car-btn prev" id="revPrev"><i class="fa-solid fa-chevron-left"></i></button>
      <div class="track" id="revTrack">
        <!-- 12 review cards -->
      </div>
      <button class="car-btn next" id="revNext"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact">
    <div class="contact-card">
      <h2>Contact Us</h2>
      <form id="contactForm">
        <input type="text" placeholder="Your Name" required>
        <input type="email" placeholder="Your Email" required>
        <textarea rows="4" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
      </form>
    </div>
    <div class="contact-card details">
      <h2>Get in Touch</h2>
      <div>üìç 123 Bookify Lane, Knowledge City, India</div>
      <div>üìû +91 98765 43210</div>
      <div>‚úâÔ∏è support@bookify.com</div>
      <div>üïë Mon‚ÄìSun ‚Ä¢ 24√ó7 Support</div>
    </div>
  </section>
</main>

<!-- Social Icons -->
    <div class="social-links">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-linkedin-in"></i></a>
      <a href="#"><i class="fab fa-pinterest"></i></a>
    </div>

<!-- Bottom -->
    <div class="footer-bottom">
      Created By <a href="#">Mafseen Patvegar</a> | All Rights Reserved!
    </div>

<!-- Buy Modal -->
<div class="modal" id="buyModal">
  <div class="panel">
    <span class="close-x" id="closeBuy">‚úï</span>
    <h3>Complete Your Purchase</h3>
    <div class="summary" id="buySummary">Selected Book: ‚Äî</div>
    <div class="offer-line" id="offerLine" style="display:none;"></div>

    <form id="buyForm">
      <div class="row">
        <div><label>Full Name</label><input id="bfName" required></div>
        <div><label>Landmark</label><input id="bfLandmark" placeholder="Near‚Ä¶"></div>
      </div>
      <label>Address</label>
      <textarea id="bfAddress" rows="3" required></textarea>

      <label>Payment Method</label>
      <select id="bfPayment" required>
        <option value="upi">UPI</option>
        <option value="card">Credit/Debit Card</option>
        <option value="cod">Cash on Delivery</option>
      </select>

      <button type="submit" class="btn brand" style="margin-top:8px;">Place Order</button>
    </form>
  </div>
</div>

<script>
/* ---------- DATA ---------- */
const books = [
  ["Atomic Habits","James Clear","Self-Help",599,"https://covers.openlibrary.org/b/isbn/9780735211292-L.jpg"],
  ["Ikigai","Hector Garcia & Francesc Miralles","Self-Help",499,"https://covers.openlibrary.org/b/isbn/9780143130727-L.jpg"],
  ["Rich Dad Poor Dad","Robert Kiyosaki","Self-Help",499,"https://covers.openlibrary.org/b/isbn/9781612680194-L.jpg"],
  ["Think and Grow Rich","Napoleon Hill","Self-Help",399,"https://covers.openlibrary.org/b/isbn/9781585424337-L.jpg"],
  ["Deep Work","Cal Newport","Self-Help",549,"https://covers.openlibrary.org/b/isbn/9781455586691-L.jpg"],
  ["The Power of Now","Eckhart Tolle","Self-Help",599,"https://covers.openlibrary.org/b/isbn/9781577314806-L.jpg"],
  ["The Subtle Art of Not Giving a F*ck","Mark Manson","Self-Help",449,"https://covers.openlibrary.org/b/isbn/9780062457714-L.jpg"],
  ["Can't Hurt Me","David Goggins","Self-Help",699,"https://covers.openlibrary.org/b/isbn/9781544512280-L.jpg"],
  ["The Art of Happiness","Dalai Lama","Spiritual",499,"https://covers.openlibrary.org/b/isbn/9781573221115-L.jpg"],
  ["Meditations","Marcus Aurelius","Spiritual",399,"https://covers.openlibrary.org/b/isbn/9780140449334-L.jpg"],
  ["The Untethered Soul","Michael A. Singer","Spiritual",449,"https://covers.openlibrary.org/b/isbn/9781572245372-L.jpg"],
  ["The Four Agreements","Don Miguel Ruiz","Spiritual",349,"https://covers.openlibrary.org/b/isbn/9781878424310-L.jpg"],
  ["Man's Search for Meaning","Viktor E. Frankl","Spiritual",399,"https://covers.openlibrary.org/b/isbn/9780807014271-L.jpg"],
  ["The Alchemist","Paulo Coelho","Fiction",399,"https://covers.openlibrary.org/b/isbn/9780061122415-L.jpg"],
  ["To Kill a Mockingbird","Harper Lee","Fiction",549,"https://covers.openlibrary.org/b/isbn/9780060935467-L.jpg"],
  ["1984","George Orwell","Fiction",449,"https://covers.openlibrary.org/b/isbn/9780451524935-L.jpg"],
  ["The Kite Runner","Khaled Hosseini","Fiction",499,"https://covers.openlibrary.org/b/isbn/9781594631931-L.jpg"],
  ["Harry Potter and the Sorcerer's Stone","J.K. Rowling","Fiction",599,"https://covers.openlibrary.org/b/isbn/9780590353427-L.jpg"],
  ["The Great Gatsby","F. Scott Fitzgerald","Fiction",399,"https://covers.openlibrary.org/b/isbn/9780743273565-L.jpg"],
  ["Jane Eyre","Charlotte Bronte","Fiction",449,"https://covers.openlibrary.org/b/isbn/9780142437209-L.jpg"],
  ["Brave New World","Aldous Huxley","Fiction",449,"https://covers.openlibrary.org/b/isbn/9780060850524-L.jpg"],
  ["The Hobbit","J.R.R. Tolkien","Fiction",499,"https://covers.openlibrary.org/b/isbn/9780547928227-L.jpg"],
  ["Steve Jobs","Walter Isaacson","Biography",799,"https://covers.openlibrary.org/b/isbn/9781451648539-L.jpg"],
  ["Becoming","Michelle Obama","Biography",699,"https://covers.openlibrary.org/b/isbn/9781524763138-L.jpg"],
  ["Elon Musk","Ashlee Vance","Biography",699,"https://covers.openlibrary.org/b/isbn/9780062301239-L.jpg"],
  ["Wings of Fire","A.P.J. Abdul Kalam","Biography",499,"https://covers.openlibrary.org/b/isbn/9788173711466-L.jpg"],
];

/* ---------- RENDER BOOKS ---------- */
const bookGrid = document.getElementById('bookGrid');
const borrowedGrid = document.getElementById('borrowedGrid');
const searchEl = document.getElementById('search');
const filterEl = document.getElementById('filter');

let borrowed = JSON.parse(localStorage.getItem('bookifyBorrowed')||'[]');

function badgeFor(book){
  // simple "offers" badge on cards
  if(book[2]==='Self-Help') return '10% OFF';
  if(book[3] >= 600) return '5% OFF';
  return null;
}
function INR(n){ return `‚Çπ${n}` }

function renderBooks(){
  bookGrid.innerHTML='';
  const q = (searchEl.value||'').toLowerCase();
  const cat = filterEl.value;
  books
    .filter(b => ((b[0].toLowerCase().includes(q) || b[1].toLowerCase().includes(q)) && (cat==='all' || b[2]===cat)))
    .forEach((b, i) => {
      const card = document.createElement('div');
      card.className='card';
      const badge = badgeFor(b);
      card.innerHTML = `
        <div style="position:relative">
          ${badge ? `<span class="badge">${badge}</span>`:''}
          <img class="cover" src="${b[4]}" alt="${b[0]}"/>
        </div>
        <div class="content">
          <div class="title">${b[0]}</div>
          <div class="muted">${b[1]}</div>
          <span class="chip">${b[2]}</span>
          <div class="price">${INR(b[3])}</div>
          <div class="actions">
            <button class="btn" onclick="borrowBook(${i})">${borrowed.includes(b[0])?'Borrowed':'Borrow'}</button>
            <button class="btn brand" onclick="openBuy(${i})">Buy</button>
          </div>
        </div>
      `;
      bookGrid.appendChild(card);
    });
  renderBorrowed();
}

function renderBorrowed(){
  borrowedGrid.innerHTML='';
  borrowed.forEach(t=>{
    const b = books.find(x=>x[0]===t);
    if(!b) return;
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`
      <img class="cover" src="${b[4]}" alt="${b[0]}"/>
      <div class="content">
        <div class="title">${b[0]}</div>
        <div class="muted">${b[1]}</div>
        <div class="price">${INR(b[3])}</div>
        <div class="actions"><button class="btn" onclick="returnBook('${b[0]}')">Return</button></div>
      </div>`;
    borrowedGrid.appendChild(card);
  });
}

function borrowBook(idx){
  const title = books[idx][0];
  if(!borrowed.includes(title)){
    borrowed.unshift(title);
    localStorage.setItem('bookifyBorrowed', JSON.stringify(borrowed));
    renderBooks();
  }
}
function returnBook(title){
  borrowed = borrowed.filter(t=>t!==title);
  localStorage.setItem('bookifyBorrowed', JSON.stringify(borrowed));
  renderBooks();
}

searchEl.addEventListener('input', renderBooks);
filterEl.addEventListener('change', renderBooks);
renderBooks();

/* ---------- BUY FLOW ---------- */
const buyModal = document.getElementById('buyModal');
const buySummary = document.getElementById('buySummary');
const offerLine = document.getElementById('offerLine');
let selectedBook = null;

function openBuy(idx){
  selectedBook = books[idx];
  // compute offers: 10% Self-Help, else 7% Biography, else 5% if price >= 600
  const [title, , category, price] = selectedBook;
  let discountPct = 0, reason = '';
  if(category==='Self-Help'){ discountPct = 10; reason='Self-Help Special 10% OFF'; }
  else if(category==='Biography'){ discountPct = 7; reason='Biography Bonanza 7% OFF'; }
  else if(price >= 600){ discountPct = 5; reason='Big Basket 5% OFF (above ‚Çπ600)'; }

  const discount = Math.round(price * discountPct / 100);
  const final = price - discount;

  buySummary.innerHTML = `
    <div><strong>${title}</strong> ‚Äî <span>${category}</span></div>
    <div>Price: <strong>${INR(price)}</strong>${discount ? ` ‚Ä¢ Discount: <strong>- ${INR(discount)}</strong>`:''}</div>
    <div><strong>Total: ${INR(final)}</strong>${final>=500 ? ' ‚Ä¢ üöö Free Shipping' : ''}</div>
  `;
  if(discountPct){
    offerLine.style.display='block';
    offerLine.textContent = `üéâ Offer Applied: ${reason}`;
  }else{
    offerLine.style.display='none';
  }
  buyModal.style.display='flex';
}
document.getElementById('closeBuy').onclick = ()=> buyModal.style.display='none';
window.addEventListener('click',(e)=>{ if(e.target===buyModal) buyModal.style.display='none'; });

document.getElementById('buyForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  const name = document.getElementById('bfName').value.trim();
  const addr = document.getElementById('bfAddress').value.trim();
  const lmark = document.getElementById('bfLandmark').value.trim();
  const pay = document.getElementById('bfPayment').value;
  alert(`‚úÖ Order placed!\n\nBook: ${selectedBook[0]}\nName: ${name}\nAddress: ${addr}\nLandmark: ${lmark || '-'}\nPayment: ${pay.toUpperCase()}`);
  buyModal.style.display='none';
  e.target.reset();
});

/* ---------- REVIEWS CAROUSEL ---------- */
const reviews = [
  ["Aditi Sharma","https://randomuser.me/api/portraits/women/44.jpg","Bookify has completely changed the way I read books online.Smooth interface and amazing collection!"],
  ["Rohit Mehta","https://randomuser.me/api/portraits/men/35.jpg","I love how simple and organized Bookify is. My students also enjoy the recommendations."],
  ["Priya Nair","https://randomuser.me/api/portraits/women/68.jpg","Borrowing saved me money every month!"],
  ["Arjun Verma","https://randomuser.me/api/portraits/men/22.jpg","Smooth website, fast checkout, and amazing book offers. Highly recommend!"],
  ["Neha Kulkarni","https://randomuser.me/api/portraits/women/12.jpg","Secure payments and quick support. Perfect!"],
  ["Kabir Singh","https://randomuser.me/api/portraits/men/41.jpg","Found rare biographies here. Impressed."],
  ["Meera Rao","https://randomuser.me/api/portraits/women/39.jpg","Dark mode is so comfy for late-night browsing."],
  ["Sanjay Patil","https://randomuser.me/api/portraits/men/64.jpg","Offers on books are genuine and useful."],
  ["Ishita Desai","https://randomuser.me/api/portraits/women/7.jpg","Beautiful, simple, and fast. Love Bookify!"],
  ["Vivek Shah","https://randomuser.me/api/portraits/men/28.jpg","Borrow feature is a smart touch."],
  ["Riya Malhotra","https://randomuser.me/api/portraits/women/53.jpg","Best place to buy self-help books. Offers are a cherry on top!"],
  ["Harsh Vardhan","https://randomuser.me/api/portraits/men/9.jpg","My go-to place for fiction now."]
];

const revTrack = document.getElementById('revTrack');
reviews.forEach(([name, img, text])=>{
  const r = document.createElement('div');
  r.className='review';
  r.innerHTML = `<img src="${img}" alt="${name}"><div class="name">${name}</div><div class="text">‚Äú${text}‚Äù</div>`;
  revTrack.appendChild(r);
});

let revIndex = 0;
const prevBtn = document.getElementById('revPrev');
const nextBtn = document.getElementById('revNext');

function reviewsPerView(){
  // crude detection based on width
  const w = revTrack.closest('.carousel').clientWidth;
  if(w < 560) return 1;
  if(w < 900) return 2;
  return 3;
}
function updateCarousel(){
  const per = reviewsPerView();
  const totalPages = Math.max(1, Math.ceil(reviews.length / per));
  if(revIndex < 0) revIndex = totalPages-1;
  if(revIndex >= totalPages) revIndex = 0;
  const cardWidth = revTrack.firstElementChild.getBoundingClientRect().width + 14; // include gap
  revTrack.style.transform = `translateX(-${revIndex * cardWidth * per}px)`;
}
prevBtn.onclick = ()=>{ revIndex--; updateCarousel(); };
nextBtn.onclick = ()=>{ revIndex++; updateCarousel(); };
window.addEventListener('resize', ()=>{ revIndex = 0; updateCarousel(); });
updateCarousel();

/* ---------- CONTACT FORM ---------- */
document.getElementById('contactForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  alert('Thanks for contacting Bookify! We will get back to you soon.');
  e.target.reset();
});

const userIcon = document.getElementById("userIcon");
    const loginPopup = document.getElementById("loginPopup");
    const closePopup = document.getElementById("closePopup");

    userIcon.addEventListener("click", () => {
      loginPopup.style.display = "flex";
    });

    closePopup.addEventListener("click", () => {
      loginPopup.style.display = "none";
    });

    window.addEventListener("click", (e) => {
      if (e.target === loginPopup) {
        loginPopup.style.display = "none";
      }
    });
</script>
</body>
</html>
